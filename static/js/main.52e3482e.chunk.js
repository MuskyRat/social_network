(this["webpackJsonpsocial-media"]=this["webpackJsonpsocial-media"]||[]).push([[0],{113:function(e,t,n){"use strict";n.d(t,"c",(function(){return x})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return S}));var r=n(3),a=n.n(r),s=n(10),c=n(12),i=n(2),o=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(i.a)(Object(i.a)({},e),r):e}))},u=n(4),l={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return u.c.get("users",{params:Object(i.a)({count:e,page:t,term:n},null===r?"":{friend:r})}).then((function(e){return e.data}))},getUser:function(e){return u.c.get("follow/".concat(e)).then((function(e){return e.data}))},follow:function(e){return u.c.post("follow/".concat(e)).then((function(e){return e.data}))},unfollow:function(e){return u.c.delete("follow/".concat(e)).then((function(e){return e.data}))}},d={users:[],totalUsersCount:0,currentPage:1,pageSize:15,isFetching:!1,followingInProgress:[],filter:{term:"",friend:null}},p=function(e){return{type:"SN/USERS/FOLLOW",userId:e}},j=function(e){return{type:"SN/USERS/UNFOLLOW",userId:e}},f=function(e){return{type:"SN/USERS/SET_USERS",users:e}},b=function(e){return{type:"SN/USERS/SET_TOTAL_USERS_COUNT",totalUsersCount:e}},h=function(e){return{type:"SN/USERS/SET_CURRENT_PAGE",currentPage:e}},O=function(e){return{type:"SN/USERS/TOGGLE_IS_FETCHING",isFetching:e}},m=function(e,t){return{type:"SN/USERS/TOGGLE_FOLLOWING_IN_PROGRESS",isFetching:e,userId:t}},_=function(e){return{type:"SN/USERS/SET_FILTER",payload:e}},x=function(e,t,n){return function(){var r=Object(s.a)(a.a.mark((function r(s){var c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s(O(!0)),s(h(t)),s(_(n)),r.next=5,l.getUsers(e,t,n.term,n.friend);case 5:c=r.sent,s(f(c.items)),s(b(c.totalCount)),s(O(!1));case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},v=function(){var e=Object(s.a)(a.a.mark((function e(t,n,r,s){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(m(!0,n)),e.next=3,r(n);case 3:e.sent.resultCode===u.a.Success&&t(s(n)),t(m(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),g=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(n,e,l.follow.bind(l),p);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(n,e,l.unfollow.bind(l),j);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/USERS/FOLLOW":return Object(i.a)(Object(i.a)({},e),{},{users:o(e.users,t.userId,"id",{followed:!0})});case"SN/USERS/UNFOLLOW":return Object(i.a)(Object(i.a)({},e),{},{users:o(e.users,t.userId,"id",{followed:!1})});case"SN/USERS/SET_USERS":return Object(i.a)(Object(i.a)({},e),{},{users:t.users});case"SN/USERS/SET_TOTAL_USERS_COUNT":return Object(i.a)(Object(i.a)({},e),{},{totalUsersCount:t.totalUsersCount});case"SN/USERS/SET_CURRENT_PAGE":return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.currentPage});case"SN/USERS/TOGGLE_IS_FETCHING":return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetching});case"SN/USERS/TOGGLE_FOLLOWING_IN_PROGRESS":return Object(i.a)(Object(i.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(c.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});case"SN/USERS/SET_FILTER":return Object(i.a)(Object(i.a)({},e),{},{filter:t.payload});default:return e}}},114:function(e,t,n){"use strict";n.d(t,"c",(function(){return I})),n.d(t,"d",(function(){return A})),n.d(t,"b",(function(){return C}));var r=n(3),a=n.n(r),s=n(10),c=n(12),i=n(2),o={"messages-received":[],"status-changed":[]},u=null,l=function(e){o["status-changed"].forEach((function(t){return t(e)}))},d=function(){console.log("openHandler"),l("ready")},p=function(){l("pending"),console.log("closeHandler"),setTimeout(h,3e3)},j=function(){l("error"),console.log("Refresh the page.")},f=function(e){o["messages-received"].forEach((function(t){return t(JSON.parse(e.data))}))},b=function(){var e,t,n,r;null===(e=u)||void 0===e||e.removeEventListener("open",d),null===(t=u)||void 0===t||t.removeEventListener("close",p),null===(n=u)||void 0===n||n.removeEventListener("error",j),null===(r=u)||void 0===r||r.removeEventListener("message",f)},h=function(){var e;console.log("createChannel"),b(),null===(e=u)||void 0===e||e.close(),u=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),l("pending"),u.addEventListener("open",d),u.addEventListener("close",p),u.addEventListener("error",j),u.addEventListener("message",f)},O=function(){h()},m=function(){var e;o["messages-received"]=[],o["status-changed"]=[],b(),null===(e=u)||void 0===e||e.close()},_=function(e,t){return o[e].push(t),function(){o[e]=o[e].filter((function(e){return e!==t}))}},x=function(e,t){o[e]=o[e].filter((function(e){return e!==t}))},v=function(e){var t;null===(t=u)||void 0===t||t.send(e)},g=n(257),S={messages:null,status:"pending"},N=function(e){return{type:"SN/CHAT/SET_MESSAGES",newMessages:e}},w=function(){return{type:"SN/CHAT/DELETE_MESSAGES"}},E=function(e){return{type:"SN/CHAT/SET_STATUS",status:e}},P=null,y=function(e){return null===P&&(P=function(t){e(N(t))}),P},T=null,U=function(e){return null===T&&(T=function(t){e(E(t))}),T},I=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(),_("messages-received",y(t)),_("status-changed",U(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},A=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x("messages-received",y(t)),x("status-changed",U(t)),m(),t(w());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:v(e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/CHAT/SET_MESSAGES":return Object(i.a)(Object(i.a)({},e),{},{messages:null!==e.messages?[].concat(Object(c.a)(e.messages),Object(c.a)(t.newMessages.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{id:Object(g.a)()})})))).filter((function(e,t,n){return t>=n.length-20})):Object(c.a)(t.newMessages.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{id:Object(g.a)()})}))).filter((function(e,t,n){return t>=n.length-20}))});case"SN/CHAT/SET_STATUS":return Object(i.a)(Object(i.a)({},e),{},{status:t.status});case"SN/CHAT/DELETE_MESSAGES":return Object(i.a)(Object(i.a)({},e),{},{messages:null});default:return e}}},115:function(e,t,n){},118:function(e,t,n){e.exports={wrapper:"Login_wrapper__1NeN7"}},124:function(e,t,n){e.exports={wrapper:"App-Preloader_wrapper__3BVmy"}},125:function(e,t,n){e.exports={wrapper:"Profile_wrapper__CJ5js"}},126:function(e,t,n){e.exports={wrapper:"Preloader_wrapper__179TU"}},127:function(e,t,n){e.exports={wrapper:"withSuspense_wrapper__1MsQm"}},13:function(e,t,n){e.exports={wrapper:"ProfileDataForm_wrapper__3wlYK",fullName:"ProfileDataForm_fullName__3zl4x",lineContainer:"ProfileDataForm_lineContainer__1bKGm",lineContainer2:"ProfileDataForm_lineContainer2__3ZIsW",line:"ProfileDataForm_line__fZegz",line2:"ProfileDataForm_line2__3kOHn",item:"ProfileDataForm_item__3LydA",content:"ProfileDataForm_content__1HGcn",checkbox:"ProfileDataForm_checkbox__3Xvzg",checkboxSpan:"ProfileDataForm_checkboxSpan__19sw2",contact:"ProfileDataForm_contact__1eleb",titleSpan:"ProfileDataForm_titleSpan__3OWPO",button:"ProfileDataForm_button__2K2PC"}},132:function(e,t,n){},18:function(e,t,n){e.exports={wrapper:"LoginForm_wrapper__2FEib",container:"LoginForm_container__3U3H_",header:"LoginForm_header__2uAly",item:"LoginForm_item__3WEho",errorMessage_1:"LoginForm_errorMessage_1__3IV9U",errorMessage_2:"LoginForm_errorMessage_2__3GmxV",rememberMe:"LoginForm_rememberMe__2obJS",span:"LoginForm_span__2k4Xx",checkbox:"LoginForm_checkbox__KLrjm",captchaUrl:"LoginForm_captchaUrl__3rjrr",img:"LoginForm_img__O_9Y_",button:"LoginForm_button__1cmlR"}},255:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(56),c=n.n(s),i=(n(132),n(5)),o=n(6),u=n(16),l=n(17),d=n(42),p=n.n(d),j=n(34),f=n.n(j),b=n(26),h=n(0),O=function(){return Object(h.jsxs)("div",{className:f.a.wrapper,children:[Object(h.jsx)("div",{className:f.a.item,children:Object(h.jsx)(b.b,{to:"/profile",activeClassName:f.a.active,children:"Profile"})}),Object(h.jsx)("div",{className:f.a.item,children:Object(h.jsx)(b.b,{to:"/users",activeClassName:f.a.active,children:"Users"})}),Object(h.jsx)("div",{className:f.a.item,children:Object(h.jsx)(b.b,{to:"/chat",activeClassName:f.a.active,children:"Chat"})})]})},m=n(11),_=n(115),x=n.n(_),v=function(){return Object(h.jsx)("div",{className:x.a.wrapper,children:"PAGE NOT FOUND: ERROR 404"})},g=n(21),S=n(36),N=n(116),w=n(3),E=n.n(w),P=n(10),y=n(2),T=n(4),U=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return T.c.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r}).then((function(e){return e.data}))},I=function(){return T.c.delete("auth/login").then((function(e){return e.data}))},A=function(){return T.c.get("auth/me").then((function(e){return e.data}))},C=function(){return T.c.get("security/get-captcha-url").then((function(e){return e.data}))},L={id:null,email:null,login:null,isAuth:!1,captchaUrl:null,errorMessage:null},k=function(e,t,n,r){return{type:"SN/AUTH/SET_AUTH_USER_DATA",payload:{id:e,email:t,login:n,isAuth:r}}},F=function(e){return{type:"SN/AUTH/SET_CAPTCHA_URL",captchaUrl:e}},R=function(e){return{type:"SN/AUTH/SET_ERROR_MESSAGE",errorMessage:e}},M=function(){return{type:"SN/AUTH/DELETE_CAPTCHA_URL"}},D=function(){return function(){var e=Object(P.a)(E.a.mark((function e(t){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:n=e.sent,r=n.data,n.resultCode===T.a.Success&&t(k(r.id,r.email,r.login,!0));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},H=function(e,t,n,r){return function(){var a=Object(P.a)(E.a.mark((function a(s,c){var i,o,u;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=c().auth.errorMessage,o=c().auth.captchaUrl,i&&s(R(null)),a.next=5,U(e,t,n,r);case 5:if((u=a.sent).resultCode!==T.a.Success){a.next=12;break}return a.next=9,s(D());case 9:o&&s(M()),a.next=19;break;case 12:if(u.resultCode!==T.b.CaptchaIsRequired){a.next=18;break}return a.next=15,s(G());case 15:s(R("Incorrect e-mail or password. Captcha is required.")),a.next=19;break;case 18:u.resultCode===T.a.Error&&s(R("Incorrect e-mail or password."));case 19:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},G=function(){return function(){var e=Object(P.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:n=e.sent,t(F(n.url));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/AUTH/SET_AUTH_USER_DATA":return Object(y.a)(Object(y.a)({},e),t.payload);case"SN/AUTH/SET_CAPTCHA_URL":return Object(y.a)(Object(y.a)({},e),{},{captchaUrl:t.captchaUrl});case"SN/AUTH/SET_ERROR_MESSAGE":return Object(y.a)(Object(y.a)({},e),{},{errorMessage:t.errorMessage});case"SN/AUTH/DELETE_CAPTCHA_URL":return Object(y.a)(Object(y.a)({},e),{},{captchaUrl:null});default:return e}},W={initialized:!1},J=function(){return{type:"SN/APP/INITIALIZE_APP",payload:{initialized:!0}}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/APP/INITIALIZE_APP":return Object(y.a)(Object(y.a)({},e),t.payload);default:return e}},q=n(12),B=function(e){return T.c.get("profile/status/".concat(e)).then((function(e){return e.data}))},K=function(e){return T.c.put("profile/status",{status:e}).then((function(e){return e.data}))},Y=function(e){return T.c.get("profile/".concat(e)).then((function(e){return e.data}))},Z=function(e){return T.c.put("profile",e).then((function(e){return e.data}))},X=function(e){var t=new FormData;return t.append("image",e),T.c.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},Q={posts:[{id:1,message:"Where is my money, nigga?!",likesCount:2},{id:2,message:"Trololo!",likesCount:10},{id:3,message:"Just wanna say Hi=)",likesCount:1}],profile:null,status:""},$={addPost:function(e){return{type:"SN/PROFILE/ADD_POST",newPostText:e}},deletePost:function(e){return{type:"SN/PROFILE/DELETE_POST",postId:e}},setProfile:function(e){return{type:"SN/PROFILE/SET_PROFILE",payload:e}},setStatus:function(e){return{type:"SN/PROFILE/SET_STATUS",status:e}},setPhoto:function(e){return{type:"SN/PROFILE/SET_PHOTO",payload:e}}},ee=function(e){return function(){var t=Object(P.a)(E.a.mark((function t(n){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(e);case 2:r=t.sent,n($.setProfile(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/PROFILE/ADD_POST":var n={id:e.posts.length+1,message:t.newPostText,likesCount:0};return Object(y.a)(Object(y.a)({},e),{},{posts:[].concat(Object(q.a)(e.posts),[n])});case"SN/PROFILE/DELETE_POST":return Object(y.a)(Object(y.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postId}))});case"SN/PROFILE/SET_PROFILE":return Object(y.a)(Object(y.a)({},e),{},{profile:t.payload});case"SN/PROFILE/SET_STATUS":return Object(y.a)(Object(y.a)({},e),{},{status:t.status});case"SN/PROFILE/SET_PHOTO":return Object(y.a)(Object(y.a)({},e),{},{profile:Object(y.a)(Object(y.a)({},e.profile),{},{photos:t.payload})});default:return e}},ne=n(113),re=n(114),ae=n(90),se=Object(S.b)({auth:z,app:V,profile:te,users:ne.a,chat:re.a,dialogs:ae.b}),ce=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||S.c,ie=Object(S.d)(se,ce(Object(S.a)(N.a)));window.store=ie;var oe=ie,ue=n(118),le=n.n(ue),de=function(e){return e.auth.id},pe=function(e){return e.auth.login},je=function(e){return e.auth.isAuth},fe=function(e){return e.auth.captchaUrl},be=function(e){return e.auth.errorMessage},he=n(18),Oe=n.n(he),me=n(15),_e=n(41),xe=function(e){e.isAuth;var t=e.captchaUrl,n=e.errorMessage,r=Object(g.c)();return Object(h.jsx)("div",{className:Oe.a.wrapper,children:Object(h.jsxs)("div",{className:Oe.a.container,children:[Object(h.jsx)("div",{className:Oe.a.header,children:Object(h.jsx)("h1",{children:"Login"})}),Object(h.jsx)(me.d,{validationSchema:_e.a({email:_e.b().email("Enter a valid email address.")}),initialValues:{email:"",password:"",rememberMe:!1,captchaUrl:""},onSubmit:function(e,t){var n=t.setSubmitting,a=r(H(e.email,e.password,e.rememberMe,e.captchaUrl));Promise.all([a]).then((function(){n(!1)}))},children:function(e){var r=e.isSubmitting;return Object(h.jsxs)(me.c,{children:[Object(h.jsxs)("div",{className:Oe.a.item,children:[Object(h.jsx)("label",{htmlFor:"email",children:"Email"}),Object(h.jsx)(me.b,{name:"email",type:"email",required:!0}),Object(h.jsx)(me.a,{name:"email",component:"span",className:Oe.a.errorMessage_1}),n&&Object(h.jsx)("span",{className:Oe.a.errorMessage_2,children:n})]}),Object(h.jsxs)("div",{className:Oe.a.item,children:[Object(h.jsx)("label",{htmlFor:"password",children:"Password"}),Object(h.jsx)(me.b,{name:"password",type:"password",required:!0})]}),Object(h.jsx)("div",{className:Oe.a.rememberMe,children:Object(h.jsxs)("label",{children:[Object(h.jsx)(me.b,{className:Oe.a.checkbox,name:"rememberMe",type:"checkbox"}),Object(h.jsx)("span",{className:Oe.a.span}),"rememberMe"]})}),t&&Object(h.jsxs)("div",{className:Oe.a.captchaUrl,children:[Object(h.jsx)("div",{className:Oe.a.img,children:Object(h.jsx)("img",{src:t,alt:""})}),Object(h.jsxs)("div",{className:Oe.a.item,children:[Object(h.jsx)("label",{htmlFor:"captchaUrl",children:"Captcha"}),Object(h.jsx)(me.b,{name:"captchaUrl",type:"text",required:!0})]})]}),Object(h.jsx)("div",{className:Oe.a.button,children:Object(h.jsx)("button",{disabled:r,type:"submit",children:"Login"})})]})}})]})})},ve=Object(g.b)((function(e){return{captchaUrl:fe(e),isAuth:je(e),errorMessage:be(e)}}),{login:H})((function(e){var t=e.login,n=e.captchaUrl,r=e.isAuth,a=e.errorMessage;return r?Object(h.jsx)(m.a,{to:"/profile"}):Object(h.jsx)("div",{className:le.a.wrapper,children:Object(h.jsx)(xe,{isAuth:r,login:t,captchaUrl:n,errorMessage:a})})})),ge=function(e){return e.app.initialized},Se=n(124),Ne=n.n(Se),we=n(63),Ee=function(){return Object(h.jsx)("div",{className:Ne.a.wrapper,children:Object(h.jsx)("img",{src:we.a,alt:""})})},Pe=n(125),ye=n.n(Pe),Te=function(e){return e.profile.posts},Ue=function(e){return e.profile.profile},Ie=function(e){return e.profile.status},Ae=n(27),Ce=n(8),Le=n.n(Ce),ke=n(49),Fe=n(13),Re=n.n(Fe),Me=function(e){var t=e.profile,n=e.deactivateEditMode,r=e.updateProfile;return Object(h.jsx)("div",{className:Re.a.wrapper,children:Object(h.jsx)(me.d,{enableReinitialize:!0,initialValues:t,onSubmit:function(e,t){t.setSubmitting;r(e),n()},children:function(e){var n=e.isSubmitting;return Object(h.jsxs)(me.c,{children:[Object(h.jsx)("div",{className:Re.a.fullName,children:Object(h.jsx)(me.b,{name:"fullName",type:"text"})}),Object(h.jsx)("div",{className:Re.a.lineContainer,children:Object(h.jsx)("div",{className:Re.a.line})}),Object(h.jsxs)("div",{className:Re.a.item,children:[Object(h.jsx)("b",{children:"Looking for a job"}),":",Object(h.jsxs)("label",{className:Re.a.checkboxLabel,children:[Object(h.jsx)(me.b,{className:Re.a.checkbox,name:"lookingForAJob",type:"checkbox"}),Object(h.jsx)("span",{className:Re.a.checkboxSpan})]})]}),Object(h.jsxs)("div",{className:Re.a.item,children:[Object(h.jsxs)("div",{className:Re.a.title,children:[Object(h.jsx)("b",{children:"My professional skills"}),":"]}),Object(h.jsx)("div",{className:Re.a.content,children:Object(h.jsx)(me.b,{name:"lookingForAJobDescription",as:"textarea",cols:100,rows:3})})]}),Object(h.jsxs)("div",{className:Re.a.item,children:[Object(h.jsxs)("div",{className:Re.a.title,children:[Object(h.jsx)("b",{children:"About me"}),":"]}),Object(h.jsx)("div",{className:Re.a.content,children:Object(h.jsx)(me.b,{name:"aboutMe",as:"textarea",cols:100,rows:3})})]}),Object(h.jsxs)("div",{className:Re.a.item,children:[Object(h.jsx)("b",{children:"Contacts"}),": ",Object.keys(t.contacts).map((function(e){return Object(h.jsxs)("div",{className:Re.a.contact,children:[Object(h.jsxs)("span",{className:Re.a.titleSpan,children:[Object(h.jsx)("b",{children:e}),": "]}),Object(h.jsx)(me.b,{name:"contacts."+e,type:"text"})]},e)}))]}),Object(h.jsx)("div",{className:Re.a.button,children:Object(h.jsx)("button",{type:"submit",disabled:n,children:"Save profile"})}),Object(h.jsx)("div",{className:Re.a.lineContainer2,children:Object(h.jsx)("div",{className:Re.a.line2})})]})}})})},De=n(64),He=n.n(De),Ge=function(e){var t=e.status,n=e.updateStatus,a=e.isOwner,s=Object(r.useState)(!1),c=Object(Ae.a)(s,2),i=c[0],o=c[1],u=Object(r.useState)(t),l=Object(Ae.a)(u,2),d=l[0],p=l[1];Object(r.useEffect)((function(){p(t)}),[t]);return Object(h.jsx)("div",{className:He.a.wrapper,children:i?Object(h.jsx)("div",{className:He.a.input,children:Object(h.jsx)("input",{type:"text",value:d,onChange:function(e){p(e.target.value)},onBlur:function(){n(d),o(!1)},autoFocus:!0,maxLength:300})}):Object(h.jsx)("div",{className:He.a.span,children:Object(h.jsx)("span",{title:"Double click to change status",onDoubleClick:function(){a&&o(!0)},children:t||"this user hasn't uploaded any status yet"})})})},ze=function(e){var t=e.status,n=e.profile,a=e.isOwner,s=e.updateStatus,c=e.updateProfile,i=e.updatePhoto,o=Object(r.useState)(!1),u=Object(Ae.a)(o,2),l=u[0],d=u[1];return Object(h.jsx)("div",{className:Le.a.wrapper,children:Object(h.jsxs)("div",{className:Le.a.container,children:[Object(h.jsx)("div",{className:Le.a.img,children:Object(h.jsx)("img",{src:n&&n.photos.large?n.photos.large:ke.a,alt:""})}),Object(h.jsx)("div",{className:Le.a.fileInput,children:a&&Object(h.jsxs)("label",{children:[Object(h.jsx)("input",{type:"file",onChange:function(e){e.target.files&&e.target.files.length&&i(e.target.files[0])},className:Le.a.file}),Object(h.jsx)("span",{className:Le.a.span,children:"Edit photo"})]})}),Object(h.jsx)(Ge,{status:t,isOwner:a,updateStatus:s}),Object(h.jsx)("div",{className:Le.a.info,children:l?Object(h.jsx)(Me,{profile:n,deactivateEditMode:function(){d(!1)},updateProfile:c}):Object(h.jsx)(We,{isOwner:a,activateEditMode:function(){d(!0)},profile:n})})]})})},We=function(e){var t=e.isOwner,n=e.activateEditMode,r=e.profile;return Object(h.jsxs)("div",{className:Le.a.wrapper2,children:[Object(h.jsx)("div",{className:Le.a.fullName,children:Object(h.jsx)("b",{children:r.fullName})}),Object(h.jsx)("div",{className:Le.a.lineContainer,children:Object(h.jsx)("div",{className:Le.a.line})}),Object(h.jsxs)("div",{className:Le.a.item,children:[Object(h.jsx)("b",{children:"Looking for a job"}),": ",r.lookingForAJob?"yes":"no"]}),r.lookingForAJob&&Object(h.jsxs)("div",{className:Le.a.item,children:[Object(h.jsxs)("div",{className:Le.a.title,children:[Object(h.jsx)("b",{children:"My professional skills"}),":"]}),Object(h.jsx)("div",{className:Le.a.content,children:r.lookingForAJobDescription})]}),Object(h.jsxs)("div",{className:Le.a.item,children:[Object(h.jsxs)("div",{className:Le.a.title,children:[Object(h.jsx)("b",{children:"About me"}),":"]}),Object(h.jsx)("div",{className:Le.a.content,children:r.aboutMe})]}),Object(h.jsxs)("div",{className:Le.a.item,children:[Object(h.jsx)("b",{children:"Contacts"}),": ",Object.keys(r.contacts).map((function(e){return Object(h.jsx)(Je,{title:e,value:r.contacts[e]},e)}))]}),t&&Object(h.jsx)("div",{className:Le.a.button,children:Object(h.jsx)("button",{onClick:n,children:"Edit profile"})}),Object(h.jsx)("div",{className:Le.a.lineContainer2,children:Object(h.jsx)("div",{className:Le.a.line2})})]})},Je=function(e){var t=e.value,n=e.title;return Object(h.jsxs)("div",{className:Le.a.contact,children:[Object(h.jsxs)("span",{className:Le.a.titleSpan,children:[Object(h.jsx)("b",{children:n}),": "]}),Object(h.jsx)("span",{className:Le.a.valueSpan,children:t})]})},Ve=n(65),qe=n.n(Ve),Be=n(66),Ke=n.n(Be),Ye=function(e){var t=e.addPost;return Object(h.jsx)("div",{className:Ke.a.wrapper,children:Object(h.jsx)(me.d,{initialValues:{newPostText:""},validationSchema:_e.a({newPostText:_e.b().required("Required")}),onSubmit:function(e,n){var r=n.setSubmitting,a=n.resetForm;t(e.newPostText),a(),r(!1)},children:function(e){var t=e.isSubmitting;return Object(h.jsxs)(me.c,{children:[Object(h.jsx)("div",{className:Ke.a.textarea,children:Object(h.jsx)(me.b,{as:"textarea",name:"newPostText",placeholder:"Enter your message..."})}),Object(h.jsx)("div",{className:Ke.a.button,children:Object(h.jsx)("button",{disabled:t,type:"submit",children:"Post"})})]})}})})},Ze=n(43),Xe=n.n(Ze),Qe=function(e){var t=e.post,n=e.deletePost;return Object(h.jsxs)("div",{className:Xe.a.wrapper,children:[Object(h.jsx)("div",{className:Xe.a.img,children:Object(h.jsx)("img",{src:ke.a,alt:""})}),Object(h.jsxs)("div",{className:Xe.a.body,children:[Object(h.jsx)("div",{className:Xe.a.text,children:Object(h.jsx)("span",{children:t.message})}),Object(h.jsxs)("div",{className:Xe.a.likes,children:[Object(h.jsxs)("span",{children:["likesCount: ",t.likesCount]}),Object(h.jsx)("button",{onClick:function(){n(t.id)},children:"Delete"})]})]})]})},$e=function(e){var t=e.posts,n=e.addPost,r=e.deletePost;return Object(h.jsxs)("div",{className:qe.a.wrapper,children:[Object(h.jsx)("div",{className:qe.a.h3,children:Object(h.jsx)("h2",{children:"My posts"})}),Object(h.jsx)(Ye,{addPost:n}),Object(h.jsx)("div",{className:qe.a.posts,children:t.map((function(e){return Object(h.jsx)(Qe,{post:e,deletePost:r},e.id)})).reverse()})]})},et=n(81),tt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"refreshProfile",value:function(){var e=Number(this.props.match.params.userId);e||(this.props.authorizedUserId&&(e=this.props.authorizedUserId),e||this.props.history.push("/login")),e?(this.props.getStatus(e),this.props.getProfile(e)):console.error("UserId must exist in URI params or in authorizedUserId")}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){e.match.params.userId!==this.props.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return this.props.profile?Object(h.jsxs)("div",{className:ye.a.wrapper,children:[Object(h.jsx)(ze,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,updateProfile:this.props.updateProfile,updatePhoto:this.props.updatePhoto,isOwner:!this.props.match.params.userId}),Object(h.jsx)($e,{posts:this.props.posts,addPost:this.props.addPost,deletePost:this.props.deletePost})]}):Object(h.jsx)(et.a,{})}}]),n}(a.a.Component),nt=Object(S.c)(Object(g.b)((function(e){return{posts:Te(e),profile:Ue(e),status:Ie(e),authorizedUserId:de(e)}}),{getStatus:function(e){return function(){var t=Object(P.a)(E.a.mark((function t(n){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(e);case 2:r=t.sent,n($.setStatus(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(P.a)(E.a.mark((function t(n){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(e);case 2:t.sent.resultCode===T.a.Success&&n($.setStatus(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getProfile:ee,updateProfile:function(e){return function(){var t=Object(P.a)(E.a.mark((function t(n,r){var a,s;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r().auth.id,t.next=3,Z(e);case 3:if((s=t.sent).resultCode!==T.a.Success){t.next=13;break}if(!a){t.next=10;break}return t.next=8,n(ee(a));case 8:t.next=11;break;case 10:throw new Error("UserId can't be null.");case 11:t.next=15;break;case 13:return t.next=15,Promise.reject(s.messages[0]);case 15:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},updatePhoto:function(e){return function(){var t=Object(P.a)(E.a.mark((function t(n){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X(e);case 2:(r=t.sent).resultCode===T.a.Success&&n($.setPhoto(r.data.photos));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},addPost:$.addPost,deletePost:$.deletePost}),m.i)(tt),rt=n(44),at=n.n(rt),st=n.p+"static/media/logo.858aa3fb.png",ct=function(){var e=Object(g.d)(je),t=Object(g.d)(pe),n=Object(g.c)(),r=Object(m.h)(),a=Object(m.g)(),s=function(){var e=Object(P.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(function(){var e=Object(P.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:e.sent.resultCode===T.a.Success&&t(k(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:t=e.sent,Promise.all([t]).then((function(){a.push("/login")}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:at.a.wrapper,children:[Object(h.jsx)("div",{className:at.a.logo,children:Object(h.jsx)(b.b,{to:"/profile",children:Object(h.jsx)("img",{src:st,alt:""})})}),Object(h.jsx)("div",{className:at.a.loginInfo,children:e?Object(h.jsxs)("div",{className:at.a.logout,children:[Object(h.jsx)("span",{children:t}),Object(h.jsx)("button",{onClick:s,children:"Logout"})]}):"/login"!==r.pathname&&Object(h.jsx)("div",{className:at.a.login,children:Object(h.jsx)("button",{onClick:function(){a.push("login")},children:"Login"})})})]})},it=n(127),ot=n.n(it);function ut(e){return function(t){return Object(h.jsx)(r.Suspense,{fallback:Object(h.jsx)("div",{className:ot.a.wrapper,children:"...Loading"}),children:Object(h.jsx)(e,Object(y.a)({},t))})}}var lt=a.a.lazy((function(){return n.e(4).then(n.bind(null,275))})),dt=a.a.lazy((function(){return n.e(3).then(n.bind(null,276))})),pt=a.a.lazy((function(){return Promise.all([n.e(6),n.e(5)]).then(n.bind(null,277))})),jt=ut(lt),ft=ut(dt),bt=ut(pt),ht=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).catchAllUnhandledErrors=function(e){alert("Some error occurred")},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("unhandledrejection",this.catchAllUnhandledErrors),this.props.initializeApp()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"render",value:function(){return this.props.initialized?Object(h.jsxs)("div",{className:p.a.App,children:[Object(h.jsx)("header",{className:p.a.header,children:Object(h.jsx)(ct,{})}),Object(h.jsx)("nav",{className:p.a.nav,children:Object(h.jsx)(O,{})}),Object(h.jsx)("main",{className:p.a.main,children:Object(h.jsx)("div",{className:p.a.wrapper,children:Object(h.jsxs)(m.d,{children:[Object(h.jsx)(m.a,{exact:!0,from:"/",to:"/profile"}),Object(h.jsx)(m.b,{path:"/profile/:userId?",render:function(){return Object(h.jsx)(nt,{})}}),Object(h.jsx)(m.b,{path:"/dialogs",render:function(){return Object(h.jsx)(jt,{})}}),Object(h.jsx)(m.b,{path:"/users",render:function(){return Object(h.jsx)(ft,{})}}),Object(h.jsx)(m.b,{path:"/chat",render:function(){return Object(h.jsx)(bt,{})}}),Object(h.jsx)(m.b,{path:"/login",render:function(){return Object(h.jsx)(ve,{})}}),Object(h.jsx)(m.b,{path:"*",render:function(){return Object(h.jsx)(v,{})}})]})})})]}):Object(h.jsx)(Ee,{})}}]),n}(a.a.Component),Ot=Object(g.b)((function(e){return{initialized:ge(e)}}),{initializeApp:function(){return function(){var e=Object(P.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(D());case 2:n=e.sent,Promise.all([n]).then((function(){return t(J())}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(ht),mt=function(){return Object(h.jsx)(b.a,{children:Object(h.jsx)(g.a,{store:oe,children:Object(h.jsx)(Ot,{})})})},_t=function(e){e&&e instanceof Function&&n.e(7).then(n.bind(null,274)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};c.a.render(Object(h.jsx)(mt,{}),document.getElementById("root")),_t()},34:function(e,t,n){e.exports={wrapper:"Navbar_wrapper__cwKln",item:"Navbar_item__2UVJ0",active:"Navbar_active__25Co8"}},4:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r,a,s=n(117),c=n.n(s).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"ec2e9a15-4537-4157-b59b-05bf7fc797c2"},withCredentials:!0});!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(r||(r={})),function(e){e[e.CaptchaIsRequired=10]="CaptchaIsRequired"}(a||(a={}))},42:function(e,t,n){e.exports={App:"App_App__1NWZs",header:"App_header__2Y_Nq",main:"App_main__Ocskk",nav:"App_nav__e0NlX"}},43:function(e,t,n){e.exports={wrapper:"Post_wrapper__6Av67",body:"Post_body__1h_j_",text:"Post_text__3GOQO",img:"Post_img__UnAW9",likes:"Post_likes__2Ebex"}},44:function(e,t,n){e.exports={wrapper:"Header_wrapper__3m8F2",logo:"Header_logo__3Jk_B",loginInfo:"Header_loginInfo__1gYDI",login:"Header_login__3f_cm",logout:"Header_logout__1ioaO"}},49:function(e,t,n){"use strict";t.a=n.p+"static/media/userPhoto.157f088b.png"},63:function(e,t,n){"use strict";t.a=n.p+"static/media/preloader.abd00aa6.svg"},64:function(e,t,n){e.exports={wrapper:"ProfileStatus_wrapper__3-8Cw",input:"ProfileStatus_input__2RwnY",span:"ProfileStatus_span__1mXbP"}},65:function(e,t,n){e.exports={h3:"MyPosts_h3__1FwJr",posts:"MyPosts_posts__1bcV_"}},66:function(e,t,n){e.exports={textarea:"MyPostsForm_textarea__WJcuK",button:"MyPostsForm_button__36GbR"}},8:function(e,t,n){e.exports={wrapper:"ProfileInfo_wrapper__TwT7F",img:"ProfileInfo_img__1TnrV",fileInput:"ProfileInfo_fileInput__2FINh",file:"ProfileInfo_file__1l3eZ",span:"ProfileInfo_span__1-FGf",info:"ProfileInfo_info__3VLr5",fullName:"ProfileInfo_fullName__1rPyw",item:"ProfileInfo_item__3pnoH",title:"ProfileInfo_title__215G8",content:"ProfileInfo_content__3Pvsr",button:"ProfileInfo_button__3Mroa",lineContainer:"ProfileInfo_lineContainer__3Gljm",lineContainer2:"ProfileInfo_lineContainer2__zDOZU",line:"ProfileInfo_line__2eOPH",line2:"ProfileInfo_line2__1NRCA",contact:"ProfileInfo_contact__Ci8Re",titleSpan:"ProfileInfo_titleSpan__36OBT",valueSpan:"ProfileInfo_valueSpan__1bLWY"}},81:function(e,t,n){"use strict";n(1);var r=n(126),a=n.n(r),s=n(63),c=n(0);t.a=function(){return Object(c.jsx)("div",{className:a.a.wrapper,children:Object(c.jsx)("img",{src:s.a,alt:""})})}},90:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(12),a=n(2),s={dialogs:[{id:1,userName:"User_1",img:null},{id:2,userName:"User_2",img:null},{id:3,userName:"User_3",img:null}],messages:[{id:1,message:"Are you going to the party tonight?",dir:"in"},{id:2,message:"The party is gonna be really cool!",dir:"in"},{id:3,message:"I am thinking whether to go or not",dir:"out"}]},c={addMessage:function(e){return{type:"SN/DIALOGS/ADD_MESSAGE",newMessageBody:e}}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/DIALOGS/ADD_MESSAGE":var n={id:e.messages.length+1,message:t.newMessageBody,dir:"out"};return Object(a.a)(Object(a.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),[n])});default:return e}}}},[[255,1,2]]]);
//# sourceMappingURL=main.52e3482e.chunk.js.map